<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Huella Digital Art√≠stica Animada</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
</head>
<body style="margin:0; background:#111;">
<script>
let ip = "0.0.0.0";
let valores;
let randomOffset = [];
let index = 0;

function setup() {
  createCanvas(800, 800);
  background(20);
  frameRate(5); // üîπ Animaci√≥n lenta y po√©tica

  // Genera un offset aleatorio para variedad
  for (let i=0;i<4;i++){
    randomOffset[i] = random(0.5,1.5);
  }

  // Obtener IP real
  fetch("https://api64.ipify.org?format=json")
    .then(res => res.json())
    .then(data => {
      ip = data.ip;
      valores = ip.split(".").map(n => int(n));
      loop();
    });

  noLoop(); // Esperar IP antes de dibujar

  // Bot√≥n descarga
  let btn = createButton('Descargar retrato');
  btn.position(10, 10);
  btn.mousePressed(() => saveCanvas('huella_digital', 'png'));
}

function draw() {
  if (!valores) return; // Esperar IP

  // Fondo con transparencia leve para dejar rastro
  background(20, 20, 30, 25);

  // Dibuja un solo estilo por frame
  let num = valores[index % valores.length] % 10;

  switch(num){
    case 0: estilo0(); break;
    case 1: estilo1(); break;
    case 2: estilo2(); break;
    case 3: estilo3(); break;
    case 4: estilo4(); break;
    case 5: estilo5(); break;
    case 6: estilo6(); break;
    case 7: estilo7(); break;
    case 8: estilo8(); break;
    case 9: estilo9(); break;
  }

  index++;

  // Texto po√©tico
  fill(255,200);
  textAlign(CENTER);
  textSize(16);
  text("Tu huella digital visual: " + ip, width/2, height - 30);

  // Opcional: detener despu√©s de un rato
  if (index > valores.length * 40) {
    noLoop();
  }
}

// -------------------- ESTILOS ANIMADOS --------------------

function estilo0() {
  let colores = ['#1F75FE','#0099FF','#C49A6C','#6B8E23'];
  for (let i=0;i<random(1,3);i++){
    fill(random(colores));
    let x = random(width);
    let y = random(height);
    let s = random(['triangulo','rombo','circulo']);
    let size = random(30,80);
    if(s=='triangulo') triangle(x, y, x+size, y+size, x-size, y+size);
    else if(s=='rombo') quad(x, y-size/2, x+size/2, y, x, y+size/2, x-size/2, y);
    else ellipse(x,y,size,size);
  }
}

function estilo1() {
  let colores = ['#39ff14','#ccff00','#E6ED07','#FF1493','#8A2BE2','#0b36c3','#01FFFF'];
  for (let i=0;i<random(2,5);i++){
    fill(random(colores));
    let x = random(width);
    let y = random(height);
    ellipse(x, y, random(20,60));
  }
}

function estilo2() {
  let colores = ['#C8A2C8','#FFC1CC','#AEC6CF','#EAD7C3','#D5C4C4'];
  for(let i=0;i<random(1,4);i++){
    fill(random(colores));
    let x=random(width);
    let y=random(height);
    let s = random(['circulo','luna','corazon','mariposa']);
    if(s=='circulo') arc(x,y,random(40,80),random(40,80),0,PI+QUARTER_PI);
    else if(s=='luna') arc(x,y,random(40,70),random(40,70),PI/4,PI+PI/4);
    else if(s=='corazon'){ 
      beginShape();
      vertex(x, y);
      bezierVertex(x-15, y-20, x-40, y+10, x, y+40);
      bezierVertex(x+40, y+10, x+15, y-20, x, y);
      endShape(CLOSE);
    } else if(s=='mariposa'){
      ellipse(x-15,y,15,40);
      ellipse(x+15,y,15,40);
    }
  }
}

function estilo3() {
  let colores = ['#32CD32','#FFD700','#FF4C4C','#FFA500','#
