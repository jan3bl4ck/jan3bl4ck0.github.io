function setup() {
  createCanvas(800, 800);
  background(10, 10, 20);

  // Crear video y esperar que se active antes de cargar el modelo
  video = createCapture(VIDEO, () => {
    console.log("âœ… CÃ¡mara lista, cargando modelo...");
    const options = { withLandmarks: true, withExpressions: false, withDescriptors: false };
    faceapi = ml5.faceApi(video, options, modelReady);
  });

  video.size(width, height);
  video.hide();

  // Obtener IP
  fetch("https://api64.ipify.org?format=json")
    .then(res => res.json())
    .then(data => {
      ip = data.ip;
      valores = ip.split(".").map(n => int(n));
      estiloSeleccionado = valores.reduce((a,b)=>a+b,0) % 10;
    });

  noStroke();
}

function modelReady() {
  console.log("ðŸ§  Modelo facial cargado y listo");
  faceapi.detect(gotResults);
}
